(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){e.exports=t(44)},43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(17),u=t.n(c),o=t(7),i=t(19),l=t(6),m=t.n(l),s=t(18),f=t(2);var d=function(e){var n=e.handleChange;return r.a.createElement("input",{type:"text",name:"filter",onChange:n})};var h=function(e){var n=e.handleSubmit,t=e.handleChange,a=e.newName,c=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,name:"name",value:a})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{onChange:t,name:"number",value:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))};var b=function(e){var n=e.person,t=n.name,a=n.number,c=n.id,u=e.handleDestroy;return r.a.createElement("div",null,t,": ",a,r.a.createElement("button",{onClick:function(){if(window.confirm("Delete ".concat(t,"?")))return u(c)}},"Delete"))};var v=function(e){var n=e.filteredList,t=e.handleDestroy;return n.map((function(e){return r.a.createElement(b,{key:e.name,person:e,handleDestroy:t})}))},p=t(4),E=t.n(p),g="/api/persons",w=(t(43),function(){var e=Object(a.useState)([]),n=Object(f.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),l=Object(f.a)(u,2),b=l[0],p=l[1],w=Object(a.useState)(""),y=Object(f.a)(w,2),j=y[0],O=y[1],C=Object(a.useState)(""),k=Object(f.a)(C,2),S=k[0],D=k[1],N=Object(a.useState)({type:"",message:""}),L=Object(f.a)(N,2),x=L[0],I=L[1];function J(e){if("name"===e.target.name)p(e.target.value);else if("number"===e.target.name)O(e.target.value);else{if("filter"!==e.target.name)return;var n=e.target.value.toLowerCase();D(n)}}function q(e,n){I({type:e,message:n}),setTimeout((function(){I({type:"",message:""})}),5e3)}Object(a.useEffect)((function(){Object(s.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(g).then((function(e){return e.data}));case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})))()}),[]);var A=t.filter((function(e){return e.name.toLocaleLowerCase().includes(S)}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),x.message&&r.a.createElement("div",{className:x.type},x.message),r.a.createElement(d,{handleChange:J}),r.a.createElement("h4",null,"Add a new"),r.a.createElement(h,{handleChange:J,handleSubmit:function(e){e.preventDefault();var n,a,r,u=t.find((function(e){return e.name===b})),l={name:b,number:j,id:t.length+1};if(u){if(window.confirm("".concat(b," is already added to the phonebook, replace the old number iwth a new one"))){var m=t.map((function(e){return e.name===b?Object(o.a)(Object(o.a)({},e),{},{number:j}):e}));(n=u.id,a=l,E.a.put("".concat(g,"/").concat(n),a).then((function(e){return e.data}))).then(c(m)).then((function(e){return q("success","".concat(b," was successfully modified"))})).catch((function(e){return q("error","Information of ".concat(b," has already been removed from server"))}))}}else(r=l,E.a.post(g,r).then((function(e){return e.data}))).then(c([].concat(Object(i.a)(t),[l]))).then((function(e){return q("success","".concat(b," was successfully added"))})).catch((function(e){return q("error","Information of ".concat(b," has already been removed from server"))}));p(""),O("")},newName:b,newNumber:j}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{filteredList:A,handleDestroy:function(e){c(t.filter((function(n){return n.id!==e}))),function(e){E.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))}(e)}}))});u.a.render(r.a.createElement(w,null),document.querySelector("#root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.0e33c7a2.chunk.js.map