(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),u=n.n(c),o=n(7),i=n(19),l=n(6),s=n.n(l),m=n(18),f=n(2);var d=function(e){var t=e.handleChange;return r.a.createElement("input",{type:"text",name:"filter",onChange:t})};var h=function(e){var t=e.handleSubmit,n=e.handleChange,a=e.newName,c=e.newNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:n,name:"name",value:a})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{onChange:n,name:"number",value:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))};var b=function(e){var t=e.person,n=t.name,a=t.number,c=t.id,u=e.handleDestroy;return r.a.createElement("div",null,n,": ",a,r.a.createElement("button",{onClick:function(){if(window.confirm("Delete ".concat(n,"?")))return u(c)}},"Delete"))};var p=function(e){var t=e.filteredList,n=e.handleDestroy;return t.map((function(e){return r.a.createElement(b,{key:e.name,person:e,handleDestroy:n})}))},v=n(4),E=n.n(v),g="/api/persons",w=(n(43),function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),l=Object(f.a)(u,2),b=l[0],v=l[1],w=Object(a.useState)(""),j=Object(f.a)(w,2),y=j[0],O=j[1],C=Object(a.useState)(""),k=Object(f.a)(C,2),S=k[0],D=k[1],N=Object(a.useState)({type:"",message:""}),L=Object(f.a)(N,2),x=L[0],J=L[1];function q(e){if("name"===e.target.name)v(e.target.value);else if("number"===e.target.name)O(e.target.value);else{if("filter"!==e.target.name)return;var t=e.target.value.toLowerCase();D(t)}}function A(e,t){J({type:e,message:t}),setTimeout((function(){J({type:"",message:""})}),5e3)}Object(a.useEffect)((function(){Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(g).then((function(e){return e.data}));case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))()}),[]);var P=n.filter((function(e){return e.name.toLocaleLowerCase().includes(S)}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),x.message&&r.a.createElement("div",{className:x.type},x.message),r.a.createElement(d,{handleChange:q}),r.a.createElement("h4",null,"Add a new"),r.a.createElement(h,{handleChange:q,handleSubmit:function(e){e.preventDefault();var t,a,r,u=n.find((function(e){return e.name===b})),l={name:b,number:y,id:n.length+1};if(u){if(window.confirm("".concat(b," is already added to the phonebook, replace the old number with a new one"))){var s=n.map((function(e){return e.name===b?Object(o.a)(Object(o.a)({},e),{},{number:y}):e}));(t=u.id,a=l,E.a.put("".concat(g,"/").concat(t),a).then((function(e){return e.data}))).then(c(s)).then((function(e){return A("success","".concat(b," was successfully modified"))})).catch((function(e){c(n),A("error",e.response.data.error)}))}}else(r=l,E.a.post(g,r).then((function(e){return e.data}))).then(c([].concat(Object(i.a)(n),[l]))).then((function(e){return A("success","".concat(b," was successfully added"))})).catch((function(e){c(n),A("error",e.response.data.error)}));v(""),O("")},newName:b,newNumber:y}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{filteredList:P,handleDestroy:function(e){c(n.filter((function(t){return t.id!==e}))),function(e){E.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))}(e)}}))});u.a.render(r.a.createElement(w,null),document.querySelector("#root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.a44fdb35.chunk.js.map